{"version":3,"sources":["../../../components/tabularDataWidget/TableColumnReorder.js"],"names":[],"mappings":"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","file":"TableColumnReorder.js","sourcesContent":["'use strict';\n\n/**\n * @ngdoc directive\n * @name Directives.tableColumnReorder\n * @restrict A\n *\n * @description A feature of tabular data widget to support column re-ordering. This should be used with {@link TabularDataWidgetDirective}.\n *\n * ##Dependen\n * - Requires {@link Controllers/Controller.TabularDataWidgetController}\n *\n * @example\n * <doc:example>\n *     <doc:source>\n *          <tabular-data-widget columns=\"tableColumns\" data=\"tableData\" sorting=\"server\" sort-change=\"sortChange(column, order)\"\n *              perform-action=\"openFlyoutWindow(event, row, field)\" table-column-reorder />\n *     </doc:source>\n * </doc:example>\n *\n * TODO: styling the drag drop process.\n */\nangular.module('plm360.tabularDataWidget').directive('tableColumnReorder', [\n\t'$document',\n\t'$compile',\n\t'$timeout',\n\t'$q',\n\tfunction ($document, $compile, $timeout, $q) {\n\t\treturn {\n\t\t\tpriority: 2,\n\t\t\trestrict: 'A',\n\t\t\treplace: true,\n\t\t\trequire: '^tabularDataWidget',\n\t\t\tlink: function (scope, element, attrs, tabularDataWidgetCtrl) {\n\n\t\t\t\t// observe function will be called on next digest cycle after compilation, ensuring that the DOM is ready.\n\t\t\t\t// In order to use this way of finding whether DOM is ready, we need to observe a scope property used by TDW in its template.\n\t\t\t\tattrs.$observe('tableRender', function (value) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\ttriggerInit();\n\t\t\t\t\t}, 0);\n\t\t\t\t});\n\n\t\t\t\t/**\n\t\t\t\t * @ngdoc method\n\t\t\t\t * @name Directives.tableColumnReorder#triggerInit\n\t\t\t\t * @methodOf Directives.tableColumnReorder\n\t\t\t\t * @description Initialization function\n\t\t\t\t */\n\t\t\t\tvar triggerInit = function () {\n\t\t\t\t\telement.addClass('reorder-columns');\n\n\t\t\t\t\tvar columnHeaderElementList = element.find('th');\n\t\t\t\t\tvar columnList = tabularDataWidgetCtrl.getColumnList();\n\n\t\t\t\t\t// Add resizer to the columns that supports resizing.\n\t\t\t\t\tfor (var i = 0; i < columnList.length; i++) {\n\t\t\t\t\t\tif (columnList[i].enableColumnReordering !== true) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcolumnHeaderElementList.eq(i).attr('draggable', 'true');\n\n\t\t\t\t\t\tcolumnHeaderElementList.eq(i).unbind('dragstart').bind('dragstart', function () {\n\t\t\t\t\t\t\tvar columnId = columnList[i].field;\n\t\t\t\t\t\t\treturn function (event) {\n\t\t\t\t\t\t\t\tevent.dataTransfer.setData('text', columnId);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}());\n\n\t\t\t\t\t\tcolumnHeaderElementList.eq(i).bind('dragend', function (event) {\n\t\t\t\t\t\t\t// Add style related stuff here (if needed).\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tcolumnHeaderElementList.eq(i).bind('dragover', function (event) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t// Add style related stuff here (if needed).\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tcolumnHeaderElementList.eq(i).bind('dragenter', function (event) {\n\t\t\t\t\t\t\t// Add style related stuff here (if needed).\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tcolumnHeaderElementList.eq(i).bind('dragleave', function (event) {\n\t\t\t\t\t\t\t// Add style related stuff here (if needed).\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tcolumnHeaderElementList.eq(i).unbind('drop').bind('drop', function () {\n\t\t\t\t\t\t\tvar columnId = columnList[i].field;\n\t\t\t\t\t\t\treturn function (event) {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tevent.stopPropagation();\n\n\t\t\t\t\t\t\t\tvar sourceColumnId = event.dataTransfer.getData('text');\n\t\t\t\t\t\t\t\tvar destinationColumnId = columnId;\n\n\t\t\t\t\t\t\t\ttabularDataWidgetCtrl.reOrderColumns(sourceColumnId, destinationColumnId);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}());\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tscope.$on('$destroy', function () {\n\t\t\t\t\t// check if there is a need to for any clean up.\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n]);\n"]}