{"version":3,"sources":["../../../components/workspaceItemWhereUsed/WorkspaceItemWhereUsedController.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CAAC,MAAM,CAAC,+BAA+B,EAAE,EAAE,CAAC;;;;;;;;;;;CAWlD,UAAU,CAAC,kCAAkC,EAAE,CAC/C,QAAQ,EACR,SAAS,EACT,cAAc,EACd,WAAW,EACX,SAAS,EACT,kBAAkB,EAClB,eAAe,EACf,cAAc,EACd,SAAS,EACT,eAAe,EACf,mBAAmB,EACnB,GAAG,EACH,UAAU,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,SAAS,EAAE,OAAO,EAAE,gBAAgB,EAAE,aAAa,EAAE,YAAY,EAAE,OAAO,EAAE,aAAa,EAAE,iBAAiB,EAAE,CAAC,EAAE;;;;;;;;AAQzJ,KAAI,iBAAiB,GAAG,IAAI,CAAC;;;;;;;;AAQ7B,OAAM,CAAC,IAAI,GAAG,YAAY;;AAEzB,mBAAiB,GAAG,KAAK,CAAC;;;;;;;;AAQ1B,QAAM,CAAC,YAAY,GAAG,EAAE,CAAC;;;;;;;;AAQzB,QAAM,CAAC,SAAS,GAAG,EAAE,CAAC;;;;;;;;AAQtB,QAAM,CAAC,aAAa,GAAG,IAAI,CAAC;;;;;;;;AAQ5B,QAAM,CAAC,YAAY,GAAG,KAAK,CAAC;;;;;;;;AAQ5B,QAAM,CAAC,UAAU,GAAG,IAAI,CAAC;;;;;;;;AAQzB,QAAM,CAAC,iBAAiB,GAAG,IAAI,CAAC;;;;;;;;AAQhC,QAAM,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;;;;;;;;AAQ1C,QAAM,CAAC,UAAU,GAAG,CAAC,CAAC;;;;;;;;AAQtB,QAAM,CAAC,YAAY,GAAG,GAAG,CAAC;;;;;;;;AAQ1B,QAAM,CAAC,SAAS,GAAG,KAAK,CAAC;;AAEzB,MAAI,OAAO,CAAC,SAAS,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAE;AAC7C,SAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;GACvB,MAAM;AACN,SAAM,CAAC,QAAQ,GAAG,KAAK,CAAC;GACxB;;;AAGD,QAAM,CAAC,UAAU,GAAG,OAAO,CAAC,aAAa,EAAE,CAAC;AAC5C,QAAM,CAAC,iBAAiB,GAAG,OAAO,CAAC,aAAa,EAAE,GAAG,UAAU,CAAC;;;AAGhE,QAAM,CAAC,YAAY,GAAG,CACrB;AACC,cAAW,EAAE,GAAG;AAChB,QAAK,EAAE,OAAO;AACd,sBAAmB,EAAE,IAAI;AACzB,QAAK,EAAE,EAAE;GACT,EACD;AACC,cAAW,EAAE,gBAAgB,CAAC,SAAS,CAAC,IAAI;AAC5C,QAAK,EAAE,iBAAiB;AACxB,sBAAmB,EAAE,IAAI;AACzB,eAAY,EAAE,uBAAuB;AACrC,QAAK,EAAE,EAAE;GACT,EACD;AACC,cAAW,EAAE,gBAAgB,CAAC,SAAS,CAAC,SAAS;AACjD,QAAK,EAAE,WAAW;AAClB,QAAK,EAAE,EAAE;GACT,EACD;AACC,cAAW,EAAE,gBAAgB,CAAC,SAAS,CAAC,QAAQ;AAChD,QAAK,EAAE,UAAU;AACjB,QAAK,EAAE,EAAE;GACT,EACD;AACC,cAAW,EAAE,gBAAgB,CAAC,SAAS,CAAC,KAAK;AAC7C,QAAK,EAAE,OAAO;AACd,sBAAmB,EAAE,IAAI;AACzB,QAAK,EAAE,EAAE;GACT,CACD,CAAC;;AAEF,QAAM,CAAC,gCAAgC,CAAC,YAAY,CAAC,WAAW,EAAE,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC;EAEzF,CAAC;;;;;;;;;;;AAWF,OAAM,CAAC,SAAS,GAAG,UAAU,MAAM,EAAE,KAAK,EAAE;AAC3C,QAAM,CAAC,SAAS,GAAG,iBAAiB,CAAC,IAAI,CACxC;AACC,eAAY,EAAE,MAAM,CAAC,YAAY;AACjC,YAAS,EAAE,MAAM,CAAC,SAAS;GAC3B,EACD;AACC,eAAY,EAAE,MAAM;AACpB,YAAS,EAAE,KAAK;GAChB,CACD,CAAC;EACF,CAAC;;;;;;;;;;;AAWF,OAAM,CAAC,gCAAgC,GAAG,UAAU,IAAI,EAAE,YAAY,EAAE;AACvE,MAAI,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;AAC5B,SAAM,CAAC,cAAc,GAAG,IAAI,CAAC,YAAY,IAAI,CAAC,CAAC;;AAE/C,OAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,YAAY,EAAE;AACzC,UAAM,CAAC,SAAS,GAAG,IAAI,CAAC;IACxB;;;AAGD,IAAC,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,OAAO,EAAE,KAAK,EAAE;;;AAG/C,UAAM,CAAC,SAAS,CAAC,IAAI,CAAC;;AAErB,UAAK,EAAE,KAAK,GAAG,CAAC;AAChB,oBAAe,EAAE;AAChB,YAAM,EAAE,OAAO,CAAC,MAAM;AACtB,SAAG,EAAE,OAAO,CAAC,eAAe;AAC5B,UAAI,EAAE,cAAU,MAAM,EAAE;;OAEvB;MACD;AACD,cAAS,EAAE,OAAO,CAAC,MAAM;AACzB,aAAQ,EAAE,KAAK,GAAG,IAAI,CAAC,MAAM,EAAE;AAC/B,UAAK,EAAE,KAAK,GAAG,IAAI,CAAC,MAAM,EAAE;KAC5B,CAAC,CAAC;IACH,CAAC,CAAC;GACH;EACD,CAAC;;;;;;;;AAQF,OAAM,CAAC,QAAQ,GAAG,YAAY;AAC7B,MAAI,MAAM,CAAC,SAAS,EAAE;AACrB,UAAO;GACP;AACD,QAAM,CAAC,UAAU,EAAE,CAAC;;;;;;EAMpB,CAAC;CACF,CACD,CAAC,CAAC","file":"WorkspaceItemWhereUsedController.js","sourcesContent":["'use strict';\n\nangular.module('plm360.workspaceItemWhereUsed', [])\n\n/**\n * @ngdoc object\n * @name Controllers.workspaceItemWhereUsedController\n *\n * @description This controller corresponds to /workspaceItems/{workspaceId}/{itemId}/WhereUsed.\n *\n * ##Dependencies\n *\n */\n.controller('WorkspaceItemWhereUsedController', [\n\t'$scope',\n\t'$window',\n\t'$stateParams',\n\t'$location',\n\t'$filter',\n\t'LocalizationData',\n\t'ModelsManager',\n\t'ChangeLogObj',\n\t'UserObj',\n\t'FlyoutService',\n\t'ClientSortService',\n\t'_',\n\tfunction ($scope, $window, $stateParams, $location, $filter, LocalizationData, ModelsManager, ChangeLogObj, UserObj, FlyoutService, ClientSortService, _) {\n\n\t\t/**\n\t\t * @ngdoc property\n\t\t * @name Controllers.workspaceItemWhereUsedController#firstTimePageLoad\n\t\t * @propertyOf Controllers.workspaceItemWhereUsedController\n\t\t * @description `private` To avoid convert string in objects when the page is loaded for first time.  {@link Controllers.workspaceItemWhereUsedController#updateContent}\n\t\t */\n\t\tvar firstTimePageLoad = null;\n\n\t\t/**\n\t\t * @ngdoc method\n\t\t * @name Controllers.workspaceItemWhereUsedController#init\n\t\t * @methodOf Controllers.workspaceItemWhereUsedController\n\t\t * @description Initialization function\n\t\t */\n\t\t$scope.init = function () {\n\n\t\t\tfirstTimePageLoad = false;\n\n\t\t\t/**\n\t\t\t * @ngdoc property\n\t\t\t * @name Controllers.workspaceItemWhereUsedController#tableColumns\n\t\t\t * @propertyOf Controllers.workspaceItemWhereUsedController\n\t\t\t * @description Stores table column header\n\t\t\t */\n\t\t\t$scope.tableColumns = [];\n\n\t\t\t/**\n\t\t\t * @ngdoc property\n\t\t\t * @name Controllers.workspaceItemWhereUsedController#tableData\n\t\t\t * @propertyOf Controllers.workspaceItemWhereUsedController\n\t\t\t * @description Stores table data of the change log\n\t\t\t */\n\t\t\t$scope.tableData = [];\n\n\t\t\t/**\n\t\t\t * @ngdoc property\n\t\t\t * @name Controllers.workspaceItemWhereUsedController#workspaceIcon\n\t\t\t * @propertyOf Controllers.workspaceItemWhereUsedController\n\t\t\t * @description The class name for the icon of this workspace\n\t\t\t */\n\t\t\t$scope.workspaceIcon = null;\n\n\t\t\t/**\n\t\t\t * @ngdoc property\n\t\t\t * @name Controllers.workspaceItemWhereUsedController#isItemPinned\n\t\t\t * @propertyOf Controllers.workspaceItemWhereUsedController\n\t\t\t * @description A boolean var that controls if this item was pinned to the dashboard\n\t\t\t */\n\t\t\t$scope.isItemPinned = false;\n\n\t\t\t/**\n\t\t\t * @ngdoc property\n\t\t\t * @name Controllers.workspaceItemWhereUsedController#dateFormat\n\t\t\t * @propertyOf Controllers.workspaceItemWhereUsedController\n\t\t\t * @description Stores the date format\n\t\t\t */\n\t\t\t$scope.dateFormat = null;\n\n\t\t\t/**\n\t\t\t * @ngdoc property\n\t\t\t * @name Controllers.workspaceItemWhereUsedController#dateAndHourFormat\n\t\t\t * @propertyOf Controllers.workspaceItemWhereUsedController\n\t\t\t * @description Stores the date format, plus hour format\n\t\t\t */\n\t\t\t$scope.dateAndHourFormat = null;\n\n\t\t\t/**\n\t\t\t * @ngdoc property\n\t\t\t * @name Controllers.workspaceItemWhereUsedController#context\n\t\t\t * @propertyOf Controllers.workspaceItemWhereUsedController\n\t\t\t * @description The context for attaching handler for infinite scrolling\n\t\t\t */\n\t\t\t$scope.context = angular.element($window);\n\n\t\t\t/**\n\t\t\t * @ngdoc property\n\t\t\t * @name Controllers.workspaceItemWhereUsedController#pageNumber\n\t\t\t * @propertyOf Controllers.workspaceItemWhereUsedController\n\t\t\t * @description The page to fetch data from\n\t\t\t */\n\t\t\t$scope.pageNumber = 1;\n\n\t\t\t/**\n\t\t\t * @ngdoc property\n\t\t\t * @name Controllers.workspaceItemWhereUsedController#itemQuantity\n\t\t\t * @propertyOf Controllers.workspaceItemWhereUsedController\n\t\t\t * @description Amount of items to fetch\n\t\t\t */\n\t\t\t$scope.itemQuantity = 100;\n\n\t\t\t/**\n\t\t\t * @ngdoc property\n\t\t\t * @name Controllers.workspaceItemWhereUsedController#endOfList\n\t\t\t * @propertyOf Controllers.workspaceItemWhereUsedController\n\t\t\t * @description A flag holding whether we've reached the end of all items in the workspace\n\t\t\t */\n\t\t\t$scope.endOfList = false;\n\n\t\t\tif (angular.isDefined($stateParams.editItem)) {\n\t\t\t\t$scope.editItem = true;\n\t\t\t} else {\n\t\t\t\t$scope.editItem = false;\n\t\t\t}\n\n\t\t\t// the date/date + hour format of the user\n\t\t\t$scope.dateFormat = UserObj.getDateFormat();\n\t\t\t$scope.dateAndHourFormat = UserObj.getDateFormat() + ' hh:mm a';\n\n\t\t\t// setup table header\n\t\t\t$scope.tableColumns = [\n\t\t\t\t{\n\t\t\t\t\tdisplayName: '#',\n\t\t\t\t\tfield: 'rowId',\n\t\t\t\t\tenableColumnSorting: true,\n\t\t\t\t\twidth: 30\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: LocalizationData.whereUsed.item,\n\t\t\t\t\tfield: 'itemDisplayName',\n\t\t\t\t\tenableColumnSorting: true,\n\t\t\t\t\tcellRenderer: 'whereUsedLinkRenderer',\n\t\t\t\t\twidth: 40\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: LocalizationData.whereUsed.lifecycle,\n\t\t\t\t\tfield: 'lifecycle',\n\t\t\t\t\twidth: 10\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: LocalizationData.whereUsed.quantity,\n\t\t\t\t\tfield: 'quantity',\n\t\t\t\t\twidth: 10\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tdisplayName: LocalizationData.whereUsed.units,\n\t\t\t\t\tfield: 'units',\n\t\t\t\t\tenableColumnSorting: true,\n\t\t\t\t\twidth: 10\n\t\t\t\t}\n\t\t\t];\n\t\t\t// initial load, with the data that has been fetched already\n\t\t\t$scope.parseWorkspaceItemWhereUsedItems(ChangeLogObj.getFullList(), $scope.itemQuantity);\n\n\t\t};\n\n\t\t/**\n\t\t * @ngdoc method\n\t\t * @name Controllers.workspaceItemWhereUsedController#applySort\n\t\t * @methodOf Controllers.workspaceItemWhereUsedController\n\t\t * @description Initiates request for single column sorting.\n\t\t *\n\t\t * @param {String} column\tThe ID of the column on which to sort - should match <code>columns.field</code>.\n\t\t * @param {String} order\tThe sort order - can either be 'asc' or 'desc'.\n\t\t */\n\t\t$scope.applySort = function (column, order) {\n\t\t\t$scope.tableData = ClientSortService.sort(\n\t\t\t\t{\n\t\t\t\t\ttableHeaders: $scope.tableColumns,\n\t\t\t\t\ttableData: $scope.tableData\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tcolumnToSort: column,\n\t\t\t\t\tsortOrder: order\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\n\t\t/**\n\t\t * @ngdoc method\n\t\t * @name Controllers.workspaceItemWhereUsedController#parseWorkspaceItemWhereUsedItems\n\t\t * @methodOf Controllers.workspaceItemWhereUsedController\n\t\t * @description Parse fetch data into table rows\n\t\t *\n\t\t * @param {Object} data change log data as fetched from server.\n\t\t * @param {Number} itemQuantity number of items to be displayed on a single page.\n\t\t */\n\t\t$scope.parseWorkspaceItemWhereUsedItems = function (data, itemQuantity) {\n\t\t\tif (angular.isDefined(data)) {\n\t\t\t\t$scope.totalItemCount = data.totalRecords || 0;\n\n\t\t\t\tif (_.size(data.elements) < itemQuantity) {\n\t\t\t\t\t$scope.endOfList = true;\n\t\t\t\t}\n\n\t\t\t\t// iterates through each change log item\n\t\t\t\t_.each(data.elements, function (element, index) {\n\n\t\t\t\t\t// assembles the table data\n\t\t\t\t\t$scope.tableData.push({\n\t\t\t\t\t\t// TODO: need to revisit date adjustment\n\t\t\t\t\t\trowId: index + 1,\n\t\t\t\t\t\titemDisplayName: {\n\t\t\t\t\t\t\tuserId: element.userId,\n\t\t\t\t\t\t\tval: element.userDisplayName,\n\t\t\t\t\t\t\tlink: function ($event) {\n\t\t\t\t\t\t\t\t// $scope.openFlyoutWindow($event, this.userId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlifecycle: element.action,\n\t\t\t\t\t\tquantity: index * Math.random(),\n\t\t\t\t\t\tunits: index * Math.random()\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @ngdoc method\n\t\t * @name Controllers.workspaceItemWhereUsedController#doScroll\n\t\t * @methodOf Controllers.workspaceItemWhereUsedController\n\t\t * @description Scroll event handler for infinite scrolling\n\t\t */\n\t\t$scope.doScroll = function () {\n\t\t\tif ($scope.endOfList) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t$scope.pageNumber++;\n\n\t\t\t// TODO: USE PROPER METHOD FOR WhereUsed\n\t\t\t// ModelsManager.getChangeLog($scope.workspaceId, $scope.itemId, $scope.sortingOrder, $scope.sortingColumn, $scope.pageNumber, $scope.itemQuantity).then(function (data) {\n\t\t\t// \t$scope.parseWorkspaceItemChangeLogItems(data.getFullList(), $scope.itemQuantity);\n\t\t\t// });\n\t\t};\n\t}\n]);\n"]}