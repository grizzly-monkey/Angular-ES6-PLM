{"version":3,"sources":["../../../scripts/models/Workspaces.js"],"names":[],"mappings":"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","file":"Workspaces.js","sourcesContent":["'use strict';\n\n/**\n * @ngdoc object\n * @name Models.Workspaces\n *\n * @description This class wraps a list of workspaces payload into an object\n *\n * ##Dependencies\n *\n */\n\n// Define the constructor\nvar Workspaces = function () {\n\tvar that = this;\n};\n\n/**\n * @ngdoc property\n * @name Models.Workspaces#iconMapping\n * @propertyOf Models.Workspaces\n * @description This is the icon mapping from the old endpoint to new font icons\n */\nWorkspaces.iconMapping = {\n\t'wicon7_24.png': 'icon-plm-stamp',\n\t'wiconcheck_24.png': 'icon-plm-inconclusive_task',\n\t'datastaylogo_24.png': 'icon-plm-gears_group',\n\t'community_24.png': 'icon-plm-monitor_view',\n\t'folder_24.png': 'icon-plm-folder',\n\t'franchise_24.png': 'icon-plm-particles',\n\t'log_24.png': 'icon-plm-task_finished',\n\t'npi_solution_24.png': 'icon-plm-cubes',\n\t'plm_solution_24.png': 'icon-plm-geometric_group',\n\t'point_click_24.png': 'icon-plm-add_mouse_action',\n\t'train_24.png': 'icon-plm-graduate',\n\t'vault_24.png': 'icon-plm-safe_box',\n\t'wicon2_24.png': 'icon-plm-document',\n\t'wicon4_24.png': 'icon-plm-users',\n\t'wicon5_24.png': 'icon-plm-spanner',\n\t'wiconbulb_24.png': 'icon-plm-lamp',\n\t'wiconfaid_24.png': 'icon-plm-medical',\n\t'adminicon_24.png': 'icon-plm-secure_session',\n\t'approval_24.png': 'icon-plm-gear_stamp_document',\n\t'blogicon_24.png': 'icon-plm-content_balloon',\n\t'bpm_solution_24.png': 'icon-plm-move_into',\n\t'caliper_24.png': 'icon-plm-precision_tool', // not sure about this one\n\t'catalog_solution_24.png': 'icon-plm-top_rank',\n\t'centralize_24.png': 'icon-plm-miscellaneous',\n\t'drillicon_24.png': 'icon-plm-drill',\n\t'newsletter_24.png': 'icon-plm-letter',\n\t'partners_24.png': 'icon-plm-avatars',\n\t'profileicon_24.png': 'icon-plm-user_document_attach',\n\t'quality_solution_24.png': 'icon-plm-put_into',\n\t'reporticon_24.png': 'icon-plm-document_stats',\n\t'reports_24.png': 'icon-plm-gear_stats',\n\t'share_24.png': 'icon-plm-safe_hands_squeeze',\n\t'structure_24.png': 'icon-plm-hierarchy',\n\t'timeline_24.png': 'icon-plm-time_reached',\n\t'wicon1_24.png': 'icon-plm-gears',\n\t'wicon3_24.png': 'icon-plm-truck',\n\t'wicon6_24.png': 'icon-plm-safe_gear'\n};\n\nWorkspaces.prototype = {\n\t/**\n\t * @ngdoc method\n\t * @name Models.Workspaces#fetch\n\t * @methodOf Models.Workspaces\n\t * @description Make a call to fetch raw data\n\t *\n\t * @param {String} menuLink The URL to use for fetching the data from v2 menu endpoint\n\t * @param {String} workspacesLink The URL to use for fetching data from v3 workspaces endpoint\n\t *\n\t * @returns {Object} An object representation of the formatted data\n\t */\n\tfetch: function (menuLink, workspacesLink) {\n\t\tvar that = this;\n\t\tvar deferred = this.$q.defer();\n\t\tvar promises = [];\n\t\tpromises.push(this.RESTWrapperService.get(menuLink, null, null, {}).then(function (payload) {\n\t\t\tthat.json = payload;\n\t\t\tangular.forEach(that.json.sections, function (section) {\n\t\t\t\tsection.iconResourceUrl = that.getIcon(section);\n\t\t\t\tangular.forEach(section.workspaces, function (workspace) {\n\t\t\t\t\tworkspace.link = 'api/v3/workspaces/' + workspace.id;\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn that;\n\t\t}));\n\t\tvar fetchNextWorkspacePage = function (link) {\n\t\t\treturn that.RESTWrapperService.get(link.substring(1), null, null, {}).then(function (payload) {\n\t\t\t\tthat._.each(payload.items, function (item) {\n\t\t\t\t\tvar ret = that._.find(that.workspacesPayload.items, function (existedItem) {\n\t\t\t\t\t\treturn existedItem.link === item.link;\n\t\t\t\t\t});\n\t\t\t\t\tif (!angular.isDefined(ret)) {\n\t\t\t\t\t\tthat.workspacesPayload.items.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (payload.next) {\n\t\t\t\t\treturn fetchNextWorkspacePage(payload.next.link);\n\t\t\t\t} else {\n\t\t\t\t\treturn that;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\tpromises.push(this.RESTWrapperService.get(workspacesLink, null, {\n\t\t\tlimit: 100,\n\t\t\toffset: 0\n\t\t}, {}).then(function (payload) {\n\t\t\tthat.workspacesPayload = payload;\n\t\t\tif (payload.next) {\n\t\t\t\treturn fetchNextWorkspacePage(payload.next.link);\n\t\t\t} else {\n\t\t\t\treturn that;\n\t\t\t}\n\t\t}));\n\t\tthis.$q.all(promises).then(function () {\n\t\t\tdeferred.resolve(that);\n\t\t});\n\t\treturn deferred.promise;\n\t},\n\n\t/**\n\t * @ngdoc method\n\t * @name Models.Workspaces#getIcon\n\t * @methodOf Models.Workspaces\n\t * @description Returns the mapped font icon for given section\n\t *\n\t * @param {Object} section The section object for which the icon to be retrieved\n\t *\n\t * @returns {string} A the icon name\n\t */\n\tgetIcon: function (section) {\n\t\tvar oldUrl = section.iconResourceUrl;\n\t\tif (oldUrl.indexOf('/') === -1) {\n\t\t\treturn oldUrl;\n\t\t}\n\t\tvar oldImage = (oldUrl.substr(oldUrl.lastIndexOf('/') + 1));\n\n\t\tvar newImage;\n\t\tangular.forEach(Workspaces.iconMapping, function (value, key) {\n\t\t\tif (key === oldImage) {\n\t\t\t\tnewImage = value;\n\t\t\t}\n\t\t});\n\n\t\t// no image found, use a generic one\n\t\tif (newImage === undefined) {\n\t\t\tnewImage = 'icon-plm-Cube';\n\t\t}\n\t\treturn newImage;\n\t},\n\n\t/**\n\t * @ngdoc method\n\t * @name Models.Workspaces#getSectionIcon\n\t * @methodOf Models.Workspaces\n\t * @description Returns the mapped font icon for given workspace\n\t *\n\t * @param {Number} workspaceId The id of the current workspace\n\t *\n\t * @returns {string} A the icon name\n\t */\n\tgetSectionIcon: function (workspaceId) {\n\t\tvar retVal = '';\n\t\tangular.forEach(this.json.sections, function (value, key) {\n\t\t\tangular.forEach(value.workspaces, function (workspace) {\n\t\t\t\tif (parseInt(workspaceId) === workspace.id) {\n\t\t\t\t\tretVal = value.iconResourceUrl;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn retVal;\n\t},\n\n\t/**\n\t * @ngdoc method\n\t * @name Models.Workspaces#getSimpleList\n\t * @methodOf Models.Workspaces\n\t * @description Returns the list of workspaces in the form of object with properties id, icon, and displayName\n\t *\n\t * @param {String} attr The attribute to sort by\n\t *\n\t * @returns {Array} The sorted list of workspaces\n\t */\n\tgetSimpleList: function (attr) {\n\t\tvar that = this;\n\t\tvar workspaceList = [];\n\t\tangular.forEach(this.json.sections, function (section) {\n\t\t\tangular.forEach(section.workspaces, function (workspace) {\n\t\t\t\tworkspaceList.push({\n\t\t\t\t\tid: workspace.id,\n\t\t\t\t\ticon: section.iconResourceUrl,\n\t\t\t\t\tdisplayName: workspace.displayName\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t\tif (angular.isDefined(attr)) {\n\t\t\tworkspaceList.sort(function (a, b) {\n\t\t\t\treturn a[attr] > b[attr];\n\t\t\t});\n\t\t}\n\t\treturn workspaceList;\n\t},\n\n\t/**\n\t * @ngdoc method\n\t * @name Models.Workspaces#getCategoryList\n\t * @methodOf Models.Workspaces\n\t * @description Returns the list of categories (sections) in the form of object with properties id, iconResourceUrl, displayName and workspaces\n\t *\n\t * @returns {Array} The list of categories\n\t */\n\tgetCategoryList: function () {\n\t\treturn this.json.sections;\n\t},\n\n\t/**\n\t * @ngdoc method\n\t * @name Models.Workspaces#getFullList\n\t * @methodOf Models.Workspaces\n\t * @description Returns the full list of workspaces with sections and workspaces relationship\n\t *\n\t * @returns {Array} The full list of workspaces\n\t */\n\tgetFullList: function () {\n\t\treturn angular.copy(this.json);\n\t},\n\n\t/**\n\t * @ngdoc method\n\t * @name Models.Workspaces#getWorkspaceLink\n\t * @methodOf Models.Workspaces\n\t * @description Returns the REST api link for the workspace given the id\n\t *\n\t * @param {Number} workspaceId The ID of the workspace whose link to retrieve\n\t *\n\t * @returns {String} The string representation of the REST link\n\t */\n\tgetWorkspaceLink: function (workspaceId) {\n\t\tvar retVal;\n\t\tangular.forEach(this.json.sections, function (value, key) {\n\t\t\tangular.forEach(value.workspaces, function (workspace) {\n\t\t\t\tif (parseInt(workspaceId) === workspace.id) {\n\t\t\t\t\tretVal = workspace.link;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn retVal;\n\t},\n\n\t/**\n\t * @ngdoc method\n\t * @name Models.Workspaces#setWorkspaceObj\n\t * @methodOf Models.Workspaces\n\t * @description Attaches the workspace object to the tree\n\t *\n\t * @param {Number} workspaceId The ID of the workspace whose obj to set\n\t * @param {Object} obj The workspace object\n\t */\n\tsetWorkspaceObj: function (workspaceId, obj) {\n\t\tangular.forEach(this.json.sections, function (value, key) {\n\t\t\tangular.forEach(value.workspaces, function (workspace) {\n\t\t\t\tif (parseInt(workspaceId) === workspace.id) {\n\t\t\t\t\tworkspace.obj = obj;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n};\n\nangular.module('plm360.models').factory('Workspaces', [\n\t'RESTWrapperService',\n\t'EventService',\n\t'$q',\n\t'_',\n\tfunction (RESTWrapperService, EventService, $q, _) {\n\t\tvar models = {};\n\t\tWorkspaces.prototype.RESTWrapperService = RESTWrapperService;\n\t\tWorkspaces.prototype.$q = $q;\n\t\tWorkspaces.prototype._ = _;\n\t\tEventService.listen('workspaces:*:get', function (event, menuLink, workspacesLink) {\n\t\t\tvar model = models[workspacesLink] || new Workspaces();\n\t\t\tmodels[workspacesLink] = model;\n\t\t\tmodel.fetch(menuLink, workspacesLink).then(function (obj) {\n\t\t\t\tEventService.send('workspaces:' + event.split(':')[1] + ':done', obj);\n\t\t\t});\n\t\t});\n\t\treturn Workspaces;\n\t}\n]);\n"]}